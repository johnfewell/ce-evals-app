<%= render 'evaluations_subnav' %>

 <ul>
    <div id="evaluations-main">

    </div>
  </ul>

<script type="text/javascript" charset="utf-8">

  $(function() {
      fetch(`/evaluations.json`, {
          headers : {
            'Content-Type': 'application/json',
            'Accept': 'application/json'
           }
        })
      .then(res => res.json())
      .then(data => addEvalsToDom(data))

    function addEvalsToDom(evalsArray) {
    	evalsArray.forEach(function(eval) {
        const newEval = new Evaluation(eval.id, eval.name, eval.course.title, eval.course.start_date)
        $('#evaluations-main').append(newEval.renderEval())
    	})
    }

    function Evaluation(id, name, course, start_date){
      this.id = id
      this.name = name
      this.course = course
      this.start_date = start_date
    }

    Evaluation.prototype.renderEval = function() {
      return `
        <li class="col-12 d-block width-full py-4 border-bottom public source">
          <div class="d-inline-block mb-1">
            <h3>
              <a href="/evaluations/${this.id}" itemprop="name codeRepository"> ${this.name}</a>
            </h3>
          </div>
          <div class="f6 text-gray mt-2">
                <span class="mr-3" itemprop="programmingLanguage">
                  Class: ${this.course}
                </span>
              Date: ${this.start_date}
          </div>
        </li>
      `
    }
})

</script>
